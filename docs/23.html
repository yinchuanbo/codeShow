<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>codeShow</title>
    <link rel="stylesheet" href="assets/codemirror5/theme/blackboard.css" />
    <link rel="stylesheet" href="assets/css/common.css" />
  </head>
  <body>
    <div class="code__wrapper">
      <div class="close__fs"></div>
      <div class="code__wrapper_header">
        <div class="code__wrapper_header_title">利用 FLIP 思路完成过渡动画</div>
        <div class="tools">
          <div class="home__icon" onclick="window.location.href = '/'"></div>
        </div>
      </div>
      <div class="code__wrapper_top">
        <div class="code__wrapper_top-html">
          <div class="title">HTML</div>
          <textarea id="htmlCode">&lt;div class=&#34;row&#34; id=&#34;row&#34;&gt;&lt;/div&gt;
&lt;button onclick=&#34;randomFLIP()&#34;&gt;点击打乱&lt;/button&gt;</textarea>
        </div>
        <div class="code__wrapper_top-css">
          <div class="title">CSS</div>
          <textarea id="cssCode">#iframe__wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.row span {
  padding: 0 5px;
  display: inline-block;
  color: #fff;
  font-size: 20px
}

button {
  margin-top: 20px
}</textarea>
        </div>
        <div class="code__wrapper_top-js">
          <div class="title">JAVASCRIPT</div>
          <textarea id="jsCode">const render = (arr) =&gt; {
  document.getElementById(&#34;row&#34;).innerHTML = arr
    .map((v) =&gt; `&lt;span id=&#34;k${v}&#34;&gt;${v}&lt;/span&gt;`)
    .join(&#34;&#34;);
};
const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
render(arr);

// 随机打乱
function shuffle(arr) {
  for (var i = arr.length - 1; i &gt;= 0; i--) {
    var randomIndex = Math.floor(Math.random() * (i + 1));
    var itemAtIndex = arr[randomIndex];
    arr[randomIndex] = arr[i];
    arr[i] = itemAtIndex;
  }
  return arr;
}

// FLIP动画函数
function randomFLIP() {
  const randomArr = shuffle(arr);
  // First
  const firstRect = (() =&gt; {
    const result = {};
    arr.map((v) =&gt; {
      result[`k${v}`] = document
        .getElementById(`k${v}`)
        .getBoundingClientRect();
    });
    return result;
  })();

  render(randomArr);

  // Last
  const lastRect = (() =&gt; {
    const result = {};
    randomArr.map((v) =&gt; {
      result[`k${v}`] = document
        .getElementById(`k${v}`)
        .getBoundingClientRect();
    });
    return result;
  })();

  // invert

  arr.forEach((v) =&gt; {
    const first = firstRect[`k${v}`];
    const last = lastRect[`k${v}`];
    const deltaX = first.left - last.left;
    const deltaY = first.top - last.top;

    document.getElementById(
      `k${v}`
    ).style = `transform: translate(${deltaX}px, ${deltaY}px);`;
    requestAnimationFrame(function () {
      // Play 去掉translate, 加上动画
      document.getElementById(`k${v}`).style = &#34;transition: all 1s&#34;;
      document.getElementById(`k${v}`).style.transform = &#34;&#34;;
    });
  });
}</textarea>
        </div>
      </div>
      <div class="code__wrapper_bottom">
        <!-- <div class="code__wrapper_top-js">
          <div class="title">JAVASCRIPT</div>
          <textarea id="jsCode">const render = (arr) =&gt; {
  document.getElementById(&#34;row&#34;).innerHTML = arr
    .map((v) =&gt; `&lt;span id=&#34;k${v}&#34;&gt;${v}&lt;/span&gt;`)
    .join(&#34;&#34;);
};
const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
render(arr);

// 随机打乱
function shuffle(arr) {
  for (var i = arr.length - 1; i &gt;= 0; i--) {
    var randomIndex = Math.floor(Math.random() * (i + 1));
    var itemAtIndex = arr[randomIndex];
    arr[randomIndex] = arr[i];
    arr[i] = itemAtIndex;
  }
  return arr;
}

// FLIP动画函数
function randomFLIP() {
  const randomArr = shuffle(arr);
  // First
  const firstRect = (() =&gt; {
    const result = {};
    arr.map((v) =&gt; {
      result[`k${v}`] = document
        .getElementById(`k${v}`)
        .getBoundingClientRect();
    });
    return result;
  })();

  render(randomArr);

  // Last
  const lastRect = (() =&gt; {
    const result = {};
    randomArr.map((v) =&gt; {
      result[`k${v}`] = document
        .getElementById(`k${v}`)
        .getBoundingClientRect();
    });
    return result;
  })();

  // invert

  arr.forEach((v) =&gt; {
    const first = firstRect[`k${v}`];
    const last = lastRect[`k${v}`];
    const deltaX = first.left - last.left;
    const deltaY = first.top - last.top;

    document.getElementById(
      `k${v}`
    ).style = `transform: translate(${deltaX}px, ${deltaY}px);`;
    requestAnimationFrame(function () {
      // Play 去掉translate, 加上动画
      document.getElementById(`k${v}`).style = &#34;transition: all 1s&#34;;
      document.getElementById(`k${v}`).style.transform = &#34;&#34;;
    });
  });
}</textarea>
        </div> -->
        <div class="code__wrapper_top-preview">
          <div class="fs__icon"></div>
          <iframe id="live-preview" src="assets/templates/template-iframe.html" width="100%" height="100%" allow="accelerometer *; camera *; encrypted-media *; display-capture *; geolocation *; gyroscope *; microphone *; midi *; clipboard-read *; clipboard-write *; web-share *; serial *; xr-spatial-tracking *" allowfullscreen="true" allowpaymentrequest="true" allowtransparency="true" sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation" class="result-iframe iframe-visual-update" name="codeShow" loading="lazy"></iframe>
        </div>
      </div>
    </div>
    <script src="assets/lib/jquery-3.7.1.min.js"></script>
    <script src="assets/lib/sass.sync.min.js"></script>
    <link rel="stylesheet" href="assets/codemirror5/lib/codemirror.css" />
    <link rel="stylesheet" href="assets/codemirror5/addon/hint/show-hint.css" />
    <script src="assets/codemirror5/lib/codemirror.js"></script>
    <script src="assets/codemirror5/addon/hint/show-hint.js"></script>
    <script src="assets/codemirror5/addon/hint/xml-hint.js"></script>
    <script src="assets/codemirror5/addon/hint/html-hint.js"></script>
    <script src="assets/codemirror5/mode/xml/xml.js"></script>
    <script src="assets/codemirror5/mode/javascript/javascript.js"></script>
    <script src="assets/codemirror5/mode/css/css.js"></script>
    <script src="assets/codemirror5/mode/htmlmixed/htmlmixed.js"></script>
    <script src="assets/codemirror5/addon/hint/css-hint.js"></script>
    <script src="assets/js/common.js"></script>
  </body>
</html>
